<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag Drop Board Test</title>
    <link rel="stylesheet" href="static/css/main.css">
</head>
<body>
    <div class="container">
        <h1>Drag Drop Board Test</h1>
        <div class="board-container">
            <div class="board-header-info">
                <h2>Test Board</h2>
                <span id="ideas-count" class="ideas-count">Loading...</span>
            </div>
            <div id="drag-drop-board" class="drag-drop-board">
                <!-- Test board will be rendered here -->
            </div>
        </div>
        
        <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
            <h3>Test Instructions:</h3>
            <ol>
                <li>The board should display 6 columns: Parking, Now, Next, Later, Release, Won't Do</li>
                <li>Ideas should be displayed as draggable cards in their respective columns</li>
                <li>Try dragging ideas between columns (admin mode is enabled)</li>
                <li>Visual feedback should appear during drag operations</li>
                <li>Check the browser console for API calls and responses</li>
                <li>Ideas with "in progress" status should have animation and special styling</li>
            </ol>
        </div>
    </div>

    <!-- Mock API for testing -->
    <script>
        window.api = {
            get: async (url) => {
                console.log('Mock API GET:', url);
                if (url.includes('/boards/')) {
                    return {
                        data: {
                            name: 'Test Board',
                            description: 'Test board description'
                        }
                    };
                }
                if (url.includes('/ideas')) {
                    return {
                        data: {
                            ideas: [
                                {
                                    id: 'I12345678',
                                    boardId: 'B12345678',
                                    oneLiner: 'Test idea 1',
                                    description: 'This is a test idea in parking',
                                    valueStatement: 'Provides test value',
                                    riceScore: { reach: 80, impact: 70, confidence: 4, effort: 60 },
                                    column: 'parking',
                                    position: 1,
                                    inProgress: false,
                                    status: 'active',
                                    thumbsUp: 5,
                                    emojiReactions: [{ emoji: 'ðŸ‘', count: 3 }],
                                    createdAt: new Date().toISOString(),
                                    updatedAt: new Date().toISOString()
                                },
                                {
                                    id: 'I87654321',
                                    boardId: 'B12345678',
                                    oneLiner: 'Test idea 2',
                                    description: 'This is a test idea in now column',
                                    valueStatement: 'Provides immediate value',
                                    riceScore: { reach: 90, impact: 80, confidence: 2, effort: 40 },
                                    column: 'now',
                                    position: 1,
                                    inProgress: true,
                                    status: 'active',
                                    thumbsUp: 8,
                                    emojiReactions: [{ emoji: 'ðŸš€', count: 2 }],
                                    createdAt: new Date().toISOString(),
                                    updatedAt: new Date().toISOString()
                                },
                                {
                                    id: 'I11111111',
                                    boardId: 'B12345678',
                                    oneLiner: 'Test idea 3',
                                    description: 'This is a test idea in next column',
                                    valueStatement: 'Future value proposition',
                                    riceScore: { reach: 60, impact: 90, confidence: 8, effort: 80 },
                                    column: 'next',
                                    position: 1,
                                    inProgress: false,
                                    status: 'active',
                                    thumbsUp: 3,
                                    emojiReactions: [],
                                    createdAt: new Date().toISOString(),
                                    updatedAt: new Date().toISOString()
                                }
                            ]
                        }
                    };
                }
                return { data: {} };
            },
            put: async (url, data) => {
                console.log('Mock API PUT:', url, data);
                return { success: true };
            }
        };

        // Mock board data
        window.boardData = {
            boardId: 'B12345678',
            isAdmin: true,
            publicLink: 'test-public-link'
        };

        // Mock idea manager
        window.ideaManager = {
            setBoardId: (id) => console.log('Set board ID:', id),
            openCreateModal: () => console.log('Open create modal'),
            editIdea: (id) => console.log('Edit idea:', id),
            toggleInProgress: async (id, inProgress) => console.log('Toggle in progress:', id, inProgress),
            markAsDone: async (id) => console.log('Mark as done:', id),
            confirmDeleteIdea: (id, title) => console.log('Confirm delete:', id, title),
            addThumbsUp: async (id) => console.log('Add thumbs up:', id),
            showEmojiPicker: (id) => console.log('Show emoji picker:', id)
        };
    </script>

    <script src="static/js/drag-drop-board.js"></script>
</body>
</html>