<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.title}}</title>
    <link rel="icon" type="image/png" href="/static/images/boom.png">
    <link rel="stylesheet" href="/static/css/main.css">
    
<script
  async
  crossorigin="anonymous"
  data-clerk-publishable-key={{.clerkPublishableKey}}
  src="https://unpkg.com/@clerk/clerk-js@5/dist/clerk.browser.js"
  type="text/javascript"
></script>
</head>
<body>
    <div id="app">
        {{template "content" .}}
    </div>

    <!-- Common JavaScript -->
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/user-context.js"></script>
    <script src="/static/js/route-protection.js"></script>
    <script>
        // Initialize Clerk
        console.log("Clerk Key = " + "{{.clerkPublishableKey}}");
        const clerkPublishableKey = "{{.clerkPublishableKey}}";
        const clerkFrontendApiUrl = "{{.clerkFrontendApiUrl}}";
        
        // Make configuration globally available for auth.js
        window.clerkPublishableKey = clerkPublishableKey;
        window.clerkFrontendApiUrl = clerkFrontendApiUrl;
        
        // Base template logging
        console.log('[Base] Page - ', new Date().toISOString());
        console.log('[Base] Page - ', document.title);
        console.log('[Base] Clerk publishable key:', clerkPublishableKey ? 'Set' : 'Not set');
        console.log('[Base] Clerk frontend API URL:', clerkFrontendApiUrl ? 'Set' : 'Not set');
        
        // Log when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('[Base] DOM loaded, initializing base template...');
            console.log('[Base] Base template initialization complete');
        });
    </script>
    {{template "scripts" .}}
</body>
</html>